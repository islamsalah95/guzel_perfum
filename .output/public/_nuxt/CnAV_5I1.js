import{d as x,u as z,r as m,o as C,S as T,x as d,z as e,B as M,P as V,T as g,V as N,N as l,a0 as v,a1 as A,X as B,C as p,A as _,O as E,Q as L,y as u,a2 as $,_ as q}from"./bb5wy1fZ.js";import{_ as D}from"./Shg85GCd.js";import{u as S}from"./C_MYWIpT.js";const U={class:"login-container"},F={class:"login-card"},G={class:"form-group"},P={class:"input-group"},R=["disabled"],H={class:"form-group"},I={class:"input-group"},O=["type","disabled"],Q=["disabled"],X={key:0,class:"alert alert-danger"},j=["disabled"],J={key:0,class:"spinner-border spinner-border-sm me-2"},K={key:1,class:"bi bi-box-arrow-in-right me-2"},W={class:"login-background"},Y={class:"floating-particles"},Z=x({__name:"login",setup(ss){const{login:y,loading:t,initAuth:w,waitForAuth:h}=S(),b=z(),a=m(""),n=m(""),c=m(!1),r=m("");C(async()=>{try{const i=w();await h(),T(()=>{i&&i()})}catch(i){console.error("Error initializing auth in login page:",i)}});const k=async()=>{var s;if(!a.value||!n.value){r.value="يرجى إدخال البريد الإلكتروني وكلمة المرور";return}r.value="";const i=await y(a.value,n.value);if(i.success)f("تم تسجيل الدخول بنجاح","success"),await $(),((s=i.user)==null?void 0:s.email)==="admin@guzel.com"?await b.push("/crud"):await b.push("/");else{let o="حدث خطأ أثناء تسجيل الدخول";i.error&&(i.error.includes("user-not-found")?o="البريد الإلكتروني غير مسجل":i.error.includes("wrong-password")?o="كلمة المرور غير صحيحة":i.error.includes("invalid-email")?o="البريد الإلكتروني غير صحيح":i.error.includes("too-many-requests")?o="تم تجاوز عدد المحاولات المسموح، يرجى المحاولة لاحقاً":i.error.includes("user-disabled")?o="تم تعطيل هذا الحساب":o=i.error),r.value=o,f(o,"error")}},f=(i,s="success")=>{const o=document.createElement("div");o.className=`toast-${s}`,o.innerHTML=`
    <i class="bi bi-${s==="success"?"check-circle":"exclamation-triangle"}"></i>
    ${i}
  `,document.body.appendChild(o),setTimeout(()=>{document.body.contains(o)&&document.body.removeChild(o)},4e3)};return(i,s)=>(u(),d("div",U,[e("div",F,[s[10]||(s[10]=e("div",{class:"login-header"},[e("img",{src:D,alt:"Güzel Logo",class:"logo"}),e("h1",{class:"login-title"},"تسجيل الدخول"),e("p",{class:"login-subtitle"},"مرحباً بك في متجر Güzel للعطور الفاخرة")],-1)),e("form",{onSubmit:M(k,["prevent"]),class:"login-form"},[e("div",G,[s[4]||(s[4]=e("label",{for:"email",class:"form-label"},"البريد الإلكتروني",-1)),e("div",P,[s[3]||(s[3]=e("i",{class:"bi bi-envelope input-icon"},null,-1)),g(e("input",{id:"email","onUpdate:modelValue":s[0]||(s[0]=o=>v(a)?a.value=o:null),type:"email",class:"form-control",placeholder:"أدخل بريدك الإلكتروني",required:"",disabled:l(t)},null,8,R),[[N,l(a)]])])]),e("div",H,[s[6]||(s[6]=e("label",{for:"password",class:"form-label"},"كلمة المرور",-1)),e("div",I,[s[5]||(s[5]=e("i",{class:"bi bi-lock input-icon"},null,-1)),g(e("input",{id:"password","onUpdate:modelValue":s[1]||(s[1]=o=>v(n)?n.value=o:null),type:l(c)?"text":"password",class:"form-control",placeholder:"أدخل كلمة المرور",required:"",disabled:l(t)},null,8,O),[[A,l(n)]]),e("button",{type:"button",class:"password-toggle",onClick:s[2]||(s[2]=o=>c.value=!l(c)),disabled:l(t)},[e("i",{class:B(l(c)?"bi bi-eye-slash":"bi bi-eye")},null,2)],8,Q)])]),l(r)?(u(),d("div",X,[s[7]||(s[7]=e("i",{class:"bi bi-exclamation-triangle"},null,-1)),p(" "+_(l(r)),1)])):V("",!0),e("button",{type:"submit",class:"btn btn-primary login-btn",disabled:l(t)},[l(t)?(u(),d("span",J)):(u(),d("i",K)),p(" "+_(l(t)?"جاري تسجيل الدخول...":"تسجيل الدخول"),1)],8,j),s[8]||(s[8]=e("div",{class:"login-footer"},[e("p",{class:"demo-info"},[e("i",{class:"bi bi-info-circle me-1"}),p(" بيانات تجريبية: admin@guzel.com / password123 ")])],-1))],32),e("div",W,[s[9]||(s[9]=e("div",{class:"perfume-bottle"},null,-1)),e("div",Y,[(u(),d(E,null,L(6,o=>e("div",{class:"particle",key:o})),64))])])])]))}}),ls=q(Z,[["__scopeId","data-v-44ab3c03"]]);export{ls as default};
