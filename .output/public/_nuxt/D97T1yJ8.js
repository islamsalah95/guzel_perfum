import{_ as j,u as L,i as N,j as b,k as F,c as r,a as t,d as u,f as s,F as O,r as T,l as I,m as n,v as i,n as U,p as C,g as w,o as m,t as E}from"./ClLD0SwT.js";import{u as A}from"./C91D-vnB.js";const G={class:"container py-5"},R={class:"table-responsive"},H={class:"table table-striped table-hover"},z={key:0},K={key:1},J=["src","alt"],Q={key:0,class:"badge bg-success"},W={key:1,class:"badge bg-secondary"},X=["onClick"],Y=["onClick"],Z={class:"modal fade",id:"addProductModal",tabindex:"-1","aria-labelledby":"addProductModalLabel","aria-hidden":"true"},h={class:"modal-dialog modal-lg"},ee={class:"modal-content"},te={class:"modal-body"},se={class:"row g-3"},le={class:"col-md-6"},oe={class:"col-md-6"},de={class:"col-md-6"},ae={class:"col-md-6"},ne={class:"col-md-12"},ie={class:"col-md-12"},re={class:"col-md-12"},me={class:"col-md-6"},ue={class:"form-check"},be={class:"modal-footer"},ce=["disabled"],pe={key:0,class:"spinner-border spinner-border-sm me-2"},fe={class:"modal fade",id:"editProductModal",tabindex:"-1","aria-labelledby":"editProductModalLabel","aria-hidden":"true"},ve={class:"modal-dialog modal-lg"},ye={class:"modal-content"},ge={class:"modal-body"},ke={class:"row g-3"},Pe={class:"col-md-6"},xe={class:"col-md-6"},Me={class:"col-md-6"},we={class:"col-md-6"},Ee={class:"col-md-12"},Ve={class:"col-md-12"},Ie={class:"col-md-12"},Ue={class:"col-md-6"},Ce={class:"form-check"},De={class:"modal-footer"},Se=["disabled"],_e={key:0,class:"spinner-border spinner-border-sm me-2"},qe={class:"modal fade",id:"deleteProductModal",tabindex:"-1","aria-labelledby":"deleteProductModalLabel","aria-hidden":"true"},Be={class:"modal-dialog"},$e={class:"modal-content"},je={class:"modal-footer"},Le=["disabled"],Ne={key:0,class:"spinner-border spinner-border-sm me-2"},y="https://guzel-1f032-default-rtdb.firebaseio.com/products",Fe={__name:"crud",async setup(Oe){let c,V;L({title:"إدارة منتجات العطور",meta:[{name:"robots",content:"noindex, nofollow"},{name:"googlebot",content:"noindex, nofollow"},{name:"description",content:"صفحة إدارة المنتجات - غير مخصصة للفهرسة"}]});const{data:g,pending:D,error:Te,refresh:k}=([c,V]=N(()=>A(`${y}.json`,{default:()=>({}),onResponseError({response:a}){console.error("Error fetching products:",a._data)}},"$UN2FtKId78")),c=await c,V(),c),p=b(!1),f=b(!1),v=b(!1),P=b(null),d=b({name:"",description:"",price:0,discount:0,image:"",category:"",meta_desc:"",best_seller:!1}),o=b({id:"",name:"",description:"",price:0,discount:0,image:"",category:"",meta_desc:"",best_seller:!1});function S(a,e){o.value={id:a,name:e.name||"",description:e.description||"",price:e.price||0,discount:e.discount||0,image:e.image||"",category:e.category||"",meta_desc:e.meta_desc||"",best_seller:e.best_seller===!0},new bootstrap.Modal(document.getElementById("editProductModal")).show()}function _(a){P.value=a,new bootstrap.Modal(document.getElementById("deleteProductModal")).show()}async function q(){p.value=!0;try{await $fetch(`${y}.json`,{method:"POST",body:{name:d.value.name,description:d.value.description,price:parseFloat(d.value.price),discount:parseInt(d.value.discount)||0,image:d.value.image,category:d.value.category,meta_desc:d.value.meta_desc,best_seller:d.value.best_seller===!0}})&&(alert("تمت إضافة المنتج بنجاح"),d.value={name:"",description:"",price:0,discount:0,image:"",category:"",meta_desc:"",best_seller:!1},bootstrap.Modal.getInstance(document.getElementById("addProductModal")).hide(),await k())}catch(a){console.error("Error adding product:",a),alert("حدث خطأ أثناء إضافة المنتج")}finally{p.value=!1}}async function B(){f.value=!0;try{await $fetch(`${y}/${o.value.id}.json`,{method:"PATCH",body:{name:o.value.name,description:o.value.description,price:parseFloat(o.value.price),discount:parseInt(o.value.discount)||0,image:o.value.image,category:o.value.category,meta_desc:o.value.meta_desc,best_seller:o.value.best_seller===!0}})&&(alert("تم تحديث المنتج بنجاح"),bootstrap.Modal.getInstance(document.getElementById("editProductModal")).hide(),await k())}catch(a){console.error("Error updating product:",a),alert("حدث خطأ أثناء تحديث المنتج")}finally{f.value=!1}}async function $(){v.value=!0;try{await $fetch(`${y}/${P.value}.json`,{method:"DELETE"})===null&&(alert("تم حذف المنتج بنجاح"),bootstrap.Modal.getInstance(document.getElementById("deleteProductModal")).hide(),await k())}catch(a){console.error("Error deleting product:",a),alert("حدث خطأ أثناء حذف المنتج")}finally{v.value=!1,P.value=null}}return F(()=>{if(typeof bootstrap>"u"){const a=document.createElement("script");a.src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js",document.head.appendChild(a)}}),(a,e)=>(m(),r("div",G,[e[64]||(e[64]=t("h1",{class:"text-center mb-5"},"إدارة منتجات العطور",-1)),e[65]||(e[65]=t("div",{class:"d-flex justify-content-between mb-4"},[t("h2",null,"قائمة المنتجات"),t("button",{class:"btn btn-primary","data-bs-toggle":"modal","data-bs-target":"#addProductModal"},[t("i",{class:"fas fa-plus"}),u(" إضافة منتج جديد ")])],-1)),t("div",R,[t("table",H,[e[23]||(e[23]=t("thead",{class:"table-dark"},[t("tr",null,[t("th",null,"الصورة"),t("th",null,"الاسم"),t("th",null,"السعر"),t("th",null,"الفئة"),t("th",null,"الأكثر مبيعاً"),t("th",null,"الإجراءات")])],-1)),t("tbody",null,[s(D)?(m(),r("tr",z,e[17]||(e[17]=[t("td",{colspan:"6",class:"text-center"},[t("div",{class:"spinner-border text-primary",role:"status"},[t("span",{class:"visually-hidden"},"جار التحميل...")])],-1)]))):!s(g)||Object.keys(s(g)).length===0?(m(),r("tr",K,e[18]||(e[18]=[t("td",{colspan:"6",class:"text-center"},"لا توجد منتجات متاحة",-1)]))):(m(!0),r(O,{key:2},T(s(g),(l,x)=>(m(),r("tr",{key:x},[t("td",null,[t("img",{src:l.image,alt:l.name,style:{width:"50px",height:"50px","object-fit":"cover"},onError:e[0]||(e[0]=M=>M.target.src="/logo.png")},null,40,J)]),t("td",null,E(l.name),1),t("td",null,E(l.price)+" EGP",1),t("td",null,E(l.category==="man"?"رجالي":"نسائي"),1),t("td",null,[l.best_seller===!0?(m(),r("span",Q,e[19]||(e[19]=[t("i",{class:"fas fa-check me-1"},null,-1),u("نعم ")]))):(m(),r("span",W,e[20]||(e[20]=[t("i",{class:"fas fa-times me-1"},null,-1),u("لا ")])))]),t("td",null,[t("button",{class:"btn btn-sm btn-outline-primary me-2",onClick:M=>S(x,l),title:"تعديل"},e[21]||(e[21]=[t("i",{class:"bi bi-pencil-square me-1"},null,-1),u("تعديل ")]),8,X),t("button",{class:"btn btn-sm btn-outline-danger",onClick:M=>_(x),title:"حذف"},e[22]||(e[22]=[t("i",{class:"bi bi-trash3 me-1"},null,-1),u("حذف ")]),8,Y)])]))),128))])])]),t("div",Z,[t("div",h,[t("div",ee,[e[41]||(e[41]=t("div",{class:"modal-header"},[t("h5",{class:"modal-title",id:"addProductModalLabel"},"إضافة منتج جديد"),t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1)),t("form",{onSubmit:I(q,["prevent"])},[t("div",te,[t("div",se,[t("div",le,[e[24]||(e[24]=t("label",{for:"addName",class:"form-label"},"اسم المنتج",-1)),n(t("input",{type:"text",class:"form-control",id:"addName","onUpdate:modelValue":e[1]||(e[1]=l=>s(d).name=l),required:""},null,512),[[i,s(d).name]]),e[25]||(e[25]=t("div",{class:"invalid-feedback"},"يرجى إدخال اسم المنتج",-1))]),t("div",oe,[e[26]||(e[26]=t("label",{for:"addPrice",class:"form-label"},"السعر (EGP)",-1)),n(t("input",{type:"number",class:"form-control",id:"addPrice","onUpdate:modelValue":e[2]||(e[2]=l=>s(d).price=l),min:"0",step:"0.01",required:""},null,512),[[i,s(d).price]]),e[27]||(e[27]=t("div",{class:"invalid-feedback"},"يرجى إدخال سعر صحيح",-1))]),t("div",de,[e[29]||(e[29]=t("label",{for:"addCategory",class:"form-label"},"الفئة",-1)),n(t("select",{class:"form-select",id:"addCategory","onUpdate:modelValue":e[3]||(e[3]=l=>s(d).category=l),required:""},e[28]||(e[28]=[t("option",{value:""},"اختر الفئة",-1),t("option",{value:"man"},"رجالي",-1),t("option",{value:"women"},"نسائي",-1)]),512),[[U,s(d).category]]),e[30]||(e[30]=t("div",{class:"invalid-feedback"},"يرجى اختيار الفئة",-1))]),t("div",ae,[e[31]||(e[31]=t("label",{for:"addDiscount",class:"form-label"},"الخصم (%)",-1)),n(t("input",{type:"number",class:"form-control",id:"addDiscount","onUpdate:modelValue":e[4]||(e[4]=l=>s(d).discount=l),min:"0",max:"100"},null,512),[[i,s(d).discount]])]),t("div",ne,[e[32]||(e[32]=t("label",{for:"addDescription",class:"form-label"},"الوصف",-1)),n(t("textarea",{class:"form-control",id:"addDescription","onUpdate:modelValue":e[5]||(e[5]=l=>s(d).description=l),rows:"3",required:""},null,512),[[i,s(d).description]]),e[33]||(e[33]=t("div",{class:"invalid-feedback"},"يرجى إدخال وصف المنتج",-1))]),t("div",ie,[e[34]||(e[34]=t("label",{for:"addImage",class:"form-label"},"رابط الصورة",-1)),n(t("input",{type:"url",class:"form-control",id:"addImage","onUpdate:modelValue":e[6]||(e[6]=l=>s(d).image=l),required:""},null,512),[[i,s(d).image]]),e[35]||(e[35]=t("div",{class:"invalid-feedback"},"يرجى إدخال رابط صحيح للصورة",-1))]),t("div",re,[e[36]||(e[36]=t("label",{for:"addMetaDesc",class:"form-label"},"وصف SEO",-1)),n(t("textarea",{class:"form-control",id:"addMetaDesc","onUpdate:modelValue":e[7]||(e[7]=l=>s(d).meta_desc=l),rows:"2",required:""},null,512),[[i,s(d).meta_desc]]),e[37]||(e[37]=t("div",{class:"invalid-feedback"},"يرجى إدخال وصف SEO",-1))]),t("div",me,[t("div",ue,[n(t("input",{class:"form-check-input",type:"checkbox",id:"addBestSeller","onUpdate:modelValue":e[8]||(e[8]=l=>s(d).best_seller=l)},null,512),[[C,s(d).best_seller]]),e[38]||(e[38]=t("label",{class:"form-check-label",for:"addBestSeller"},"الأكثر مبيعاً",-1))])])])]),t("div",be,[e[40]||(e[40]=t("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"إغلاق",-1)),t("button",{type:"submit",class:"btn btn-primary",disabled:s(p)},[s(p)?(m(),r("span",pe)):w("",!0),e[39]||(e[39]=u(" حفظ المنتج "))],8,ce)])],32)])])]),t("div",fe,[t("div",ve,[t("div",ye,[e[59]||(e[59]=t("div",{class:"modal-header"},[t("h5",{class:"modal-title",id:"editProductModalLabel"},"تعديل المنتج"),t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1)),t("form",{onSubmit:I(B,["prevent"])},[t("div",ge,[t("div",ke,[t("div",Pe,[e[42]||(e[42]=t("label",{for:"editName",class:"form-label"},"اسم المنتج",-1)),n(t("input",{type:"text",class:"form-control",id:"editName","onUpdate:modelValue":e[9]||(e[9]=l=>s(o).name=l),required:""},null,512),[[i,s(o).name]]),e[43]||(e[43]=t("div",{class:"invalid-feedback"},"يرجى إدخال اسم المنتج",-1))]),t("div",xe,[e[44]||(e[44]=t("label",{for:"editPrice",class:"form-label"},"السعر (EGP)",-1)),n(t("input",{type:"number",class:"form-control",id:"editPrice","onUpdate:modelValue":e[10]||(e[10]=l=>s(o).price=l),min:"0",step:"0.01",required:""},null,512),[[i,s(o).price]]),e[45]||(e[45]=t("div",{class:"invalid-feedback"},"يرجى إدخال سعر صحيح",-1))]),t("div",Me,[e[47]||(e[47]=t("label",{for:"editCategory",class:"form-label"},"الفئة",-1)),n(t("select",{class:"form-select",id:"editCategory","onUpdate:modelValue":e[11]||(e[11]=l=>s(o).category=l),required:""},e[46]||(e[46]=[t("option",{value:""},"اختر الفئة",-1),t("option",{value:"man"},"رجالي",-1),t("option",{value:"women"},"نسائي",-1)]),512),[[U,s(o).category]]),e[48]||(e[48]=t("div",{class:"invalid-feedback"},"يرجى اختيار الفئة",-1))]),t("div",we,[e[49]||(e[49]=t("label",{for:"editDiscount",class:"form-label"},"الخصم (%)",-1)),n(t("input",{type:"number",class:"form-control",id:"editDiscount","onUpdate:modelValue":e[12]||(e[12]=l=>s(o).discount=l),min:"0",max:"100"},null,512),[[i,s(o).discount]])]),t("div",Ee,[e[50]||(e[50]=t("label",{for:"editDescription",class:"form-label"},"الوصف",-1)),n(t("textarea",{class:"form-control",id:"editDescription","onUpdate:modelValue":e[13]||(e[13]=l=>s(o).description=l),rows:"3",required:""},null,512),[[i,s(o).description]]),e[51]||(e[51]=t("div",{class:"invalid-feedback"},"يرجى إدخال وصف المنتج",-1))]),t("div",Ve,[e[52]||(e[52]=t("label",{for:"editImage",class:"form-label"},"رابط الصورة",-1)),n(t("input",{type:"url",class:"form-control",id:"editImage","onUpdate:modelValue":e[14]||(e[14]=l=>s(o).image=l),required:""},null,512),[[i,s(o).image]]),e[53]||(e[53]=t("div",{class:"invalid-feedback"},"يرجى إدخال رابط صحيح للصورة",-1))]),t("div",Ie,[e[54]||(e[54]=t("label",{for:"editMetaDesc",class:"form-label"},"وصف SEO",-1)),n(t("textarea",{class:"form-control",id:"editMetaDesc","onUpdate:modelValue":e[15]||(e[15]=l=>s(o).meta_desc=l),rows:"2",required:""},null,512),[[i,s(o).meta_desc]]),e[55]||(e[55]=t("div",{class:"invalid-feedback"},"يرجى إدخال وصف SEO",-1))]),t("div",Ue,[t("div",Ce,[n(t("input",{class:"form-check-input",type:"checkbox",id:"editBestSeller","onUpdate:modelValue":e[16]||(e[16]=l=>s(o).best_seller=l)},null,512),[[C,s(o).best_seller]]),e[56]||(e[56]=t("label",{class:"form-check-label",for:"editBestSeller"},"الأكثر مبيعاً",-1))])])])]),t("div",De,[e[58]||(e[58]=t("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"إغلاق",-1)),t("button",{type:"submit",class:"btn btn-primary",disabled:s(f)},[s(f)?(m(),r("span",_e)):w("",!0),e[57]||(e[57]=u(" حفظ التعديلات "))],8,Se)])],32)])])]),t("div",qe,[t("div",Be,[t("div",$e,[e[62]||(e[62]=t("div",{class:"modal-header"},[t("h5",{class:"modal-title",id:"deleteProductModalLabel"},"تأكيد الحذف"),t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1)),e[63]||(e[63]=t("div",{class:"modal-body"},[t("p",null,"هل أنت متأكد أنك تريد حذف هذا المنتج؟ لا يمكن التراجع عن هذا الإجراء.")],-1)),t("div",je,[e[61]||(e[61]=t("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"إلغاء",-1)),t("button",{type:"button",class:"btn btn-danger",onClick:$,disabled:s(v)},[s(v)?(m(),r("span",Ne)):w("",!0),e[60]||(e[60]=u(" حذف "))],8,Le)])])])])]))}},Re=j(Fe,[["__scopeId","data-v-2b79381d"]]);export{Re as default};
